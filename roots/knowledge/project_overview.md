# Roots プロジェクト概要

## サービスの全体像

Roots（旧称: co-shien / KidOS）は、障害児通所支援事業所向けのSaaS管理システムである。児童発達支援・放課後等デイサービス等の事業所が、日常業務から監査準備まで一気通貫で運営できることを目指している。

### 究極のゴール

```
実地指導で必要なすべての情報がワンクリックで出せる
= 障害児通所支援事業の運営がこのSaaSで完結する
```

### 代替するツール
- 会計ソフト
- 人事労務ソフト
- 請求ソフト（Litalico等）
- 運営管理システム

---

## 3つの柱

### 1. キャリアアカウント（個人の職業人生を記録）
- 基本情報（名前、資格、スキル）
- 雇用関係（どの施設で働いているか）
- 勤怠記録（出勤/退勤ボタン → リアルタイム記録）
- 職歴（過去の施設での勤務記録）
- 実務経験証明書（ワンクリック発行）
- 履歴書・職務経歴書（自動更新）

### 2. 施設運営（ビジネス側）
- 基本情報（サービス種別、地域区分、定員）
- スタッフ管理（雇用関係の管理、キャリアアカウントとの紐付け）
- 利用者管理（児童、保護者）
- スケジュール・実績記録
- 加算記録（専門的支援等）
- 会計・経費・P/L
- 実地指導資料の自動生成

### 3. 経営シミュレーション（計画・分析）
- 目標単価設計（スタッフの専門性から取れる加算を判定）
- 売上予測（単価 x 想定児童数）
- 費用計画（人件費、固定費）
- 月次P/L予測
- 計画 vs 実績の比較分析

---

## 3つのコアアカウント

### 1. 施設管理者アカウント（Roots for Facility）
- 施設情報の登録
- スタッフ（キャリアアカウント）の招待と紐付け
- 保護者アカウントの招待と児童情報の紐付け
- スタッフのシフト作成と勤怠確認・修正
- 有給休暇の承認フロー
- 勤務実績表（出勤簿）の出力

### 2. スタッフ/キャリアアカウント（Roots for Career）
- 自身のプロフィールと保有資格の登録
- スマホからの出退勤打刻（GPS/QR）
- シフト確認と有給休暇の申請
- 打刻データは個人の「実務経験ログ」として蓄積

### 3. 保護者アカウント（Roots for Family）
- 児童のプロフィール、特性、受給者証データ（画像と期間）の登録
- 施設とのシンプルな連絡機能（日々の記録の受け取り、欠席連絡）
- 複数の施設に紐付け可能（N:Mの関係）

---

## データモデル概要

### 主要エンティティ

```
users（キャリアアカウント / 保護者アカウント）
  ├── user_type: 'career' | 'client' | 'admin'
  ├── account_status: 'pending' | 'active' | 'suspended'
  └── 1:N → employment_records（雇用関係）

employment_records（所属関係）
  ├── user_id → users
  ├── facility_id → facilities
  ├── role, employment_type
  └── experience_verification_status

facilities（施設）
  ├── facility_settings（施設設定）
  ├── facility_time_slots（時間枠設定）
  └── 1:N → children（利用児童）

children（利用児童）
  ├── owner_profile_id → users（保護者）
  └── N:M → facilities（contracts経由）

contracts（契約管理）
  ├── child_id → children
  ├── facility_id → facilities
  └── status: 'pending' | 'active' | 'terminated' | 'rejected'

attendance_records（勤怠記録）
  ├── user_id → users
  └── facility_id → facilities
```

### データ所有権の分離
- **事業所が所有する業務データ**: 日報、勤怠、スケジュール
- **スタッフ個人が所有するキャリアデータ**: 資格、認証済み職歴
- **保護者が所有する利用者データ**: 児童プロファイル、受給者証

---

## マルチテナント構造

- **施設単位でのデータ分離**: 各施設のデータは `facilityId` で管理
- **3階層のユーザー管理**: 管理者（admin）、スタッフ（staff）、保護者（client）
- **認証・認可**: `AuthContext` でユーザー情報と施設情報を管理
- **サブドメイン分離**: `biz.*`（事業所側）、`my.*`（保護者側）

---

## 未設定時の動作ルール

マスターデータが未設定の場合、関連機能を使用不可にしてガイダンスを表示する。

| 設定項目 | 未設定時の動作 |
|---------|---------------|
| サービス種別 | 加算・報酬計算不可、ガイダンス表示 |
| 地域区分 | 単価計算不可、ガイダンス表示 |
| 時間枠 | スケジュール機能使用不可、ガイダンス表示 |
| 定員 | 稼働率表示不可、ガイダンス表示 |
| スタッフ | 人員配置基準計算不可、ガイダンス表示 |

---

*最終更新: 2026-02-25*
